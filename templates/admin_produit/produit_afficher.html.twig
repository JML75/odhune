{% extends 'base.html.twig' %}

{% block title %}{{ parent() }} | Gestion {% endblock %}
{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/produit_afficher.css') }}">
{% endblock %}
{% block h1 %}Gestion produit{% endblock %}
{% block body %}

<div class="wrapper">
    <a class='btn btn-success' href="{{ path('produit_ajouter') }}">Ajouter un produit</a>

    {% for notification in app.flashes("succes") %}
    <div class="class col-md-6 mx-auto text-center alert alert-success">{{ notification }}</div>
        
    {% endfor %}

     {% if produits %} 


        <table class="table table-hover table-striped text-center mt-3">
            <thead class="bg-dark text-white">

                <tr>
                
                    <th>ID</th>
                    <th>Nom</th>
                    <th>Ref</th>
                    <th>Categorie</th>
                    <th>Forme (â‚¬)</th>
                    <th>Couleur</th>
                    <th>Taille</th>
                    <th>Motif</th>
                    <th>Prix rev HT</th>
                    <th>Prix pub TTC</th>
                    <th>Photo</th>
                    <th>Modifier</th>
                    <th>Supprimer</th>
                
                </tr>    
            </thead>

            <tbody>            
                {% for produit in produits %}
                    
                    <tr class="align-middle">
             
                        <td>{{ produit.id }}</td>
                        <td>{{ produit.nom }}</td>
                        <td>{{ produit.ref }}</td>                   
                        <td>{{ produit.forme }}</td>
                        <td>{{ produit.couleur }}</td>
                        <td>{{ produit.taille }}</td>
                        <td>{{ produit.motif }}</td>
                        <td>{{ produit.prix_rev_ht }}</td>
                        <td>{{ produit.prix_pub_ttc }}</td>
                        <td>
                            {% if produit.photo %}
                                <img src="{{ asset("img/imagesProduitUpload/" ~ produit.phoro ) }}" alt="image du produit" style="width:80px"> 
                            {% else %}
                                <img src="{{ asset('img/imageDefault.jpg') }}" alt="" style="width:80px">
                            {% endif %}
                        </td>
                        <td>
                            <a href="{{ path ('produit_modifier', {'id' : produit.id})}}">
                                <img src="{{ asset('img/icones/update.png') }}" alt="">
                            </a>
                        </td>

                        <td>
                            <a href="{{ path('produit_supprimer', {'id' : produit.id } ) }}" onclick="return confirm('Confirmez-vous la suppression de ce produit ?')">
                                <img src="{{ asset('img/icones/delete.png') }}" alt="">
                            </a>
                        </td>  
                    </tr>
                {% endfor %}          
            </tbody>              
        </table>


    {% else %}
        
        <h4 class="text-center text-danger mt-3 fst-italic">Il n'y a aucun produit pour le moment</h4>

    {% endif %}
     



</div>

{% endblock %}
